<p><code>msh</code> has a fixed number of built in data types</p>

<ul>
    <li><a href="#data-type-literal">Literal</a></li>
    <li><a href="#data-type-bool">Bool</a></li>
    <li><a href="#data-type-quotation">Quotation</a></li>
    <li><a href="#data-type-list">List</a></li>
    <li><a href="#data-type-string">String</a></li>
    <li><a href="#data-type-int-and-float">Integer</a></li>
    <li><a href="#data-type-int-and-float">Float</a></li>
    <li><a href="#data-type-path">Path</a></li>
    <li><a href="#data-type-dictionary">Dictionary</a></li>
    <li><a href="#data-type-datetime">Date/Time</a></li>
    <li><a href="#data-type-maybe">Maybe</a></li>
    <li><a href="#data-type-pipe">Pipe</a></li>
    <li><a href="#data-type-binary">Binary</a>
</ul>

<p>
The source code for all these types is in a single file at: <a href="https://github.com/mitchpaulus/mshell/blob/main/mshell/MShellObject.go" target="_blank" rel="noopener noreferrer">mshell/MShellObject.go</a>.
</p>

<h1 id="data-type-literal">Literal</h1>

<p>
Since brevity is a strong design goal, like most shells, many basic tokens can be written as-is.
But unlike in most shells, we limit where the number of places literal tokens can be used.
They can only be used in list literals, because that's how commands are input.
Outside of lists, it will result in a error.
</p>

<h1 id="data-type-bool">Bool</h1>

<p>Bools are represented by 
<code><span class="mshellTRUE">true</span></code>
 and 
 <code><span class="mshellFALSE">false</span></code>.</p>


<h1 id="data-type-quotation">Quotation</h1>

<p>
Quotations are blocks of code that can be executed.
They are created by wrapping code in parentheses.
</p>

<pre>
<code><span class="mshellLEFT_PAREN">(</span><span class="mshellINTEGER">1</span> <span class="mshellINTEGER">2</span> <span class="mshellPLUS">+</span><span class="mshellRIGHT_PAREN">)</span>
<span class="mshellEOF"></span></code>
</pre>


<h1 id="data-type-list">List</h1>

<p>
Lists are created by wrapping elements in square brackets.
No commas are required between elements.
</p>

<pre>
<code><span class="mshellLEFT_SQUARE_BRACKET">[</span><span class="mshellINTEGER">1</span> <span class="mshellINTEGER">2</span> <span class="mshellINTEGER">3</span><span class="mshellRIGHT_SQUARE_BRACKET">]</span>
<span class="mshellEOF"></span></code>
</pre>

<p>Lists can be added together with the <code>+</code> operator. The result is a new list object.</p>

<pre>
<code><span class="mshellLEFT_SQUARE_BRACKET">[</span><span class="mshellINTEGER">1</span> <span class="mshellINTEGER">2</span><span class="mshellRIGHT_SQUARE_BRACKET">]</span> <span class="mshellLEFT_SQUARE_BRACKET">[</span><span class="mshellINTEGER">3</span> <span class="mshellINTEGER">4</span><span class="mshellRIGHT_SQUARE_BRACKET">]</span> <span class="mshellPLUS">+</span> <span class="mshellLINECOMMENT"># [1 2 3 4]</span>
<span class="mshellEOF"></span></code>
</pre>


<h1 id="data-type-string">String</h1>

<p>
<code>msh</code> has double quotes and single quotes. 
Double quoted strings have the following escape sequences:
</p>

<ul>
  <li> <code>\e</code>: Escape </li>
  <li> <code>\n</code>: Newline </li>
  <li> <code>\t</code>: Tab </li>
  <li> <code>\r</code>: Carriage return </li>
  <li> <code>\\</code>: Backslash </li>
  <li> <code>\"</code>: Double quote </li>
</ul>

<p> If you have a backslash, and it isn't followed by one of the escape characters above, <code>msh</code> will throw an error. </p>

<p> No escaping is done within single quoted strings or paths. </p>

<h1 id="data-type-path">Path</h1>
<p> Since paths are such a common object to deal with in shell scripts, mshell has a dedicated type. </p>

<p>
Paths are created by wrapping the path in backticks. No escaping is done.
If you need to escape or use string interpolation, then use double quotes and <code>toPath</code>.
</p>

<pre>
<code><span class="mshellPATH">`path/to/file`</span>
<span class="mshellFORMATSTRING">$&#34;my/path/is/built/from/{variable}&#34;</span> <span class="mshellLITERAL">toPath</span>
<span class="mshellEOF"></span></code>
</pre>

<p>
Because paths are fundamentally different than strings, many functions change their behavior on whether the input is a path or a string.
For example, for a function like <code>parseJson</code>, if the input is a path, it will read the file at that path and parse the contents as JSON.
Otherwise, it will parse the string as JSON directly.
</p>

<p>
The other place this is important is in command input redirection.
You often want to pipe input into a command, but sometimes it's from a file, and sometimes it's from a string.
In <code>msh</code>, this choice can be made by using the appropriate type.
</p>

<pre>
<code><span class="mshellLEFT_SQUARE_BRACKET">[</span><span class="mshellLITERAL">wc</span> <span class="mshellLITERAL">-l</span><span class="mshellRIGHT_SQUARE_BRACKET">]</span> <span class="mshellPATH">`myfile.txt`</span> <span class="mshellLESSTHAN">&lt;</span> <span class="mshellEXECUTE">;</span> <span class="mshellLINECOMMENT"># Counts the number of lines in myfile.txt</span>
<span class="mshellLEFT_SQUARE_BRACKET">[</span><span class="mshellLITERAL">wc</span> <span class="mshellLITERAL">-l</span><span class="mshellRIGHT_SQUARE_BRACKET">]</span> <span class="mshellSTRING">&#34;line 1\nline 2\n&#34;</span> <span class="mshellLESSTHAN">&lt;</span> <span class="mshellEXECUTE">;</span> <span class="mshellLINECOMMENT"># Counts the number of lines in the string &#34;line 1\nline 2\n&#34; (2)</span>
<span class="mshellEOF"></span></code>
</pre>

<h1 id="data-type-dictionary">Dictionary</h1>

<p>
mshell has the concept of dictionaries or associative arrays, but only with string keys (like <code>awk</code>).
</p>
<p>
Dictionaries can be instantiated using dictionary literals, like:
</p>

<pre>
<code><span class="mshellLEFT_CURLY">{</span> <span class="mshellSTRING">&#34;key&#34;</span><span class="mshellCOLON">:</span> <span class="mshellINTEGER">1</span> <span class="mshellRIGHT_CURLY">}</span>
<span class="mshellEOF"></span></code>
</pre>

<p>
Be careful with some of the lexing around the colon, as it's used with indexing.
Best practice is a space between the colon and the value.
</p>

<pre>
<code><span class="mshellLEFT_CURLY">{</span> <span class="mshellSTRING">&#34;key&#34;</span><span class="mshellENDINDEXER">:1</span> <span class="mshellRIGHT_CURLY">}</span> <span class="mshellLINECOMMENT"># Bad because &#39;:1&#39; is treated as index</span>
<span class="mshellEOF"></span></code>
</pre>

<h1 id="data-type-datetime">Date/Time</h1>

<p>
Date/times can be entered using a literal syntax, in ISO-8601 format.
</p>

<pre>
<code><span class="mshellLINECOMMENT"># All are valid</span>
<span class="mshellDATETIME">2023-10-01</span>
<span class="mshellDATETIME">2023-10-01T13</span>
<span class="mshellDATETIME">2023-10-01T13:01</span>
<span class="mshellDATETIME">2023-10-01T13:01:30</span>
<span class="mshellEOF"></span></code>
</pre>


<p>
Dates can be subtracted from each other, and the result is a float number of days.
</p>

<pre>
<code><span class="mshellDATETIME">2023-10-02</span> <span class="mshellDATETIME">2023-10-01</span> <span class="mshellMINUS">-</span> <span class="mshellLINECOMMENT"># 1.0</span>
<span class="mshellEOF"></span></code>
</pre>

<h1 id="data-type-int-and-float">Float and Integer</h1>

<p>
mshell makes a distinction between integers and floats.
Any literal number with a decimal will be lexed as a float, otherwise it will be an integer.
</p>

<pre>
<code><span class="mshellINTEGER">1</span>   <span class="mshellLINECOMMENT"># This is a integer literal</span>
<span class="mshellFLOAT">1.0</span> <span class="mshellLINECOMMENT"># This is a float literal</span>
<span class="mshellEOF"></span></code>
</pre>

<p>
Division for integers will result in an integer without the remainder.
</p>

<pre>
<code><span class="mshellINTEGER">5</span> <span class="mshellINTEGER">2</span> <span class="mshellLITERAL">/</span> <span class="mshellLINECOMMENT"># Integer 2, not float 2.5</span>
<span class="mshellEOF"></span></code>
</pre>

<p>
Division is only supported for similar types, it is a runtime error to divide with a float and an integer.
For the other operations, if the types are mixed, the result is a float.
</p>

<pre>
<code><span class="mshellINTEGER">2</span> <span class="mshellFLOAT">2.5</span> <span class="mshellASTERISK">*</span> <span class="mshellLINECOMMENT"># 5.0 float</span>
<span class="mshellINTEGER">3</span> <span class="mshellFLOAT">2.5</span> <span class="mshellMINUS">-</span> <span class="mshellLINECOMMENT"># 0.5 float</span>
<span class="mshellINTEGER">3</span> <span class="mshellFLOAT">2.5</span> <span class="mshellPLUS">+</span> <span class="mshellLINECOMMENT"># 5.5 float</span>
<span class="mshellEOF"></span></code>
</pre>


<h1 id="data-type-maybe">Maybe</h1>

<p>
The <code>Maybe</code> type is a way to represent a value that may or may not exist.
It's like a better, strongly typed null value.
It's a value that can either be <code>none</code> or a <code>just[type]</code> value.
</p>

<p>
They can be instantiated using:
</p>

<pre>
<code><span class="mshellLITERAL">none</span> <span class="mshellLINECOMMENT"># None value</span>
<span class="mshellSTRING">&#34;my string&#34;</span> <span class="mshellLITERAL">just</span> <span class="mshellLINECOMMENT"># Just value of a string</span>
<span class="mshellEOF"></span></code>
</pre>

<p>
There are several functions with a Maybe type, but perhaps the most important is to just unwrap the value and fail entirely if it is <code>none</code>.
This is done with the <code>?</code> operator.
</p>

<pre>
<code><span class="mshellSTRING">&#34;1&#34;</span> <span class="mshellLITERAL">toFloat</span><span class="mshellQUESTION">?</span> <span class="mshellLINECOMMENT"># This will result in 1.0 being on the stack (Not wrapped)</span>
<span class="mshellSTRING">&#34;bad string&#34;</span> <span class="mshellLITERAL">toFloat</span><span class="mshellQUESTION">?</span> <span class="mshellLINECOMMENT"># This will result in failure and execution will stop.</span>
<span class="mshellEOF"></span></code>
</pre>

<h1 id="data-type-pipe">Pipe</h1>

<p>
A <code>pipe</code> is really a special list (and this type may get consumed by <code>list</code> in the future).
</p>

<p>
It's created by the <code>|</code> operator.
</p>

<pre>
<code><span class="mshellLEFT_SQUARE_BRACKET">[</span>
  <span class="mshellLEFT_SQUARE_BRACKET">[</span> <span class="mshellLITERAL">myCommand</span> <span class="mshellRIGHT_SQUARE_BRACKET">]</span>
  <span class="mshellLEFT_SQUARE_BRACKET">[</span> <span class="mshellLITERAL">wc</span> <span class="mshellLITERAL">-l</span> <span class="mshellRIGHT_SQUARE_BRACKET">]</span>
<span class="mshellRIGHT_SQUARE_BRACKET">]</span> <span class="mshellPIPE">|</span> <span class="mshellEXECUTE">;</span>  <span class="mshellLINECOMMENT"># Counting the number of lines of output from myCommand</span>
<span class="mshellEOF"></span></code>
</pre>

<h1 id="data-type-binary">Binary</h1>

<p>
Many times in shell programs you need to deal directly with binary data.
This type represents an array of bytes.
Example functions that takes binary data as input and output is <a href="functions.html#func-utf8Str"><code>utf8Str</code></a> and <a href="functions.html#func-utf8Bytes"><code>utf8Bytes</code></a>.
</p>
