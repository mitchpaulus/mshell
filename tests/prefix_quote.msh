# Test prefix quote syntax

# Basic filter
[1 2 3 4 5] .filter 3 > end (str) map ", " join wl

# Basic map
[1 2 3] .map 2 * end (str) map ", " join wl

# Empty result from filter
[1 2 3] .filter 10 > end len wl

# Nested prefix quotes
[-1 2 -3 4] .filter 0 > end .map 2 * end (str) map ", " join wl

# each with prefix quote
0 total!
[1 2 3 4 5] .each @total + total! end
@total wl

# Mix prefix and traditional syntax
[1 2 3 4 5] .filter 2 > end (2 *) map (str) map ", " join wl

# Prefix quote with variable capture
5 threshold!
[1 2 3 4 5 6 7] .filter @threshold > end (str) map ", " join wl

# Prefix quote calling user-defined function
def double (int -- int)
    2 *
end

[1 2 3] .map double end (str) map ", " join wl
